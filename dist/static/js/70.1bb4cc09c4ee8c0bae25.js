webpackJsonp([70],{"G+ZR":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),s=a("Dd8w"),r=a.n(s),o=a("exGp"),c=a.n(o),l=a("Mqi+"),d={name:"PatientSelectModal",props:{visible:{type:Boolean,default:!1}},data:function(){return{loading:!1,tableLoading:!1,patientList:[],selectedPatient:null,searchParams:{name:"",code:""},pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e,t){return"第 "+t[0]+"-"+t[1]+" 条/共 "+e+" 条"}},columns:[{title:"所属医院",dataIndex:"hospitalId",key:"hospitalId",scopedSlots:{customRender:"hospitalId"}},{title:"所属科室",dataIndex:"departmentId",key:"departmentId",scopedSlots:{customRender:"departmentId"}},{title:"患者姓名",dataIndex:"name",key:"name"},{title:"性别",dataIndex:"gender",key:"gender",scopedSlots:{customRender:"gender"}},{title:"出生日期",dataIndex:"birthday",key:"birthday"},{title:"患者唯一码",dataIndex:"code",key:"code"},{title:"状态",dataIndex:"status",key:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",dataIndex:"createTime",key:"createTime"}],hospitalDict:l.c,departmentDict:l.a}},computed:{rowSelection:function(){return{type:"radio",selectedRowKeys:this.selectedPatient?[this.selectedPatient.id]:[],onChange:this.onSelectChange}}},watch:{visible:function(e){e&&this.loadPatientList()}},methods:{loadPatientList:function(){var e=this;return c()(i.a.mark(function t(){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.tableLoading=!0,t.prev=1,a=r()({pageNum:e.pagination.current,pageSize:e.pagination.pageSize},e.searchParams),t.next=5,e.$get("/patient/page",a);case 5:(n=t.sent)&&n.data&&(e.patientList=n.data.records||n.data.list||[],e.pagination.total=n.data.total||0),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),e.$message.error("加载患者列表失败");case 13:return t.prev=13,e.tableLoading=!1,t.finish(13);case 16:case"end":return t.stop()}},t,e,[[1,9,13,16]])}))()},handleSearch:function(){this.pagination.current=1,this.loadPatientList()},handleReset:function(){this.searchParams={name:"",code:""},this.pagination.current=1,this.loadPatientList()},handleTableChange:function(e){this.pagination.current=e.current,this.pagination.pageSize=e.pageSize,this.loadPatientList()},onSelectChange:function(e,t){this.selectedPatient=t.length>0?t[0]:null},handleOk:function(){this.selectedPatient?(this.loading=!0,this.$emit("patientSelected",this.selectedPatient),this.loading=!1):this.$message.warning("请选择一个患者")},handleCancel:function(){this.selectedPatient=null,this.$emit("cancel")}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择患者",visible:e.visible,confirmLoading:e.loading,width:"1000px",maskClosable:!1},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("div",{staticClass:"search-area"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{span:8}},[a("a-input",{attrs:{placeholder:"患者姓名",allowClear:""},on:{change:e.handleSearch},model:{value:e.searchParams.name,callback:function(t){e.$set(e.searchParams,"name",t)},expression:"searchParams.name"}})],1),e._v(" "),a("a-col",{attrs:{span:8}},[a("a-input",{attrs:{placeholder:"患者唯一码",allowClear:""},on:{change:e.handleSearch},model:{value:e.searchParams.code,callback:function(t){e.$set(e.searchParams,"code",t)},expression:"searchParams.code"}})],1),e._v(" "),a("a-col",{attrs:{span:8}},[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.handleSearch}},[e._v("\n          搜索\n        ")]),e._v(" "),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:e.handleReset}},[e._v("\n          重置\n        ")])],1)],1)],1),e._v(" "),a("a-table",{attrs:{columns:e.columns,dataSource:e.patientList,loading:e.tableLoading,pagination:e.pagination,rowSelection:e.rowSelection,scroll:{y:400},rowKey:"id"},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"hospitalId",fn:function(t){return[e._v("\n      "+e._s(e.hospitalDict[t]||t)+"\n    ")]}},{key:"departmentId",fn:function(t){return[e._v("\n      "+e._s(e.departmentDict[t]||t)+"\n    ")]}},{key:"gender",fn:function(t){return[e._v("\n      "+e._s("M"===t?"男":"F"===t?"女":"")+"\n    ")]}},{key:"status",fn:function(t){return["online"===t?a("a-tag",{attrs:{color:"green"}},[e._v("在线")]):"offline"===t?a("a-tag",{attrs:{color:"red"}},[e._v("离线")]):"error"===t?a("a-tag",{attrs:{color:"orange"}},[e._v("故障")]):"unknown"===t?a("a-tag",[e._v("未知")]):a("span",[e._v(e._s(t||"-"))])]}}])})],1)},staticRenderFns:[]},u=a("VU/8")(d,h,!1,function(e){a("QQFf")},"data-v-4f783bb2",null);t.default=u.exports},QQFf:function(e,t){}});