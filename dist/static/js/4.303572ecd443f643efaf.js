webpackJsonp([4,43,53,81],{"+lxO":function(t,e){},"1yPJ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("PJh5"),n=a.n(i),r={name:"PatientEdit",props:{patientEditVisiable:{default:!1}},computed:{show:{get:function(){return this.patientEditVisiable},set:function(){}}},data:function(){return{form:this.$form.createForm(this),loading:!1,rowId:null}},methods:{setFormValues:function(t){this.rowId=t.id;var e={};["hospitalId","departmentId","name","gender","birthday","code"].forEach(function(a){"birthday"===a&&t[a]?e[a]=n()(t[a]):e[a]=t[a]}),this.form.setFieldsValue(e)},reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var t=this;this.form.validateFields(function(e,a){e||(t.loading=!0,a.id=t.rowId,a.birthday&&a.birthday.format&&(a.birthday=a.birthday.format("YYYY-MM-DD")),t.$putJson("/patient",a).then(function(){t.reset(),t.$emit("success")}).catch(function(){t.loading=!1}))})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"编辑患者",width:800},on:{cancel:t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.onClose}},[t._v("取消")]),t._v(" "),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("修改")])],1),t._v(" "),a("a-form",{attrs:{form:t.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"所属医院"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["hospitalId",{rules:[{required:!0,message:"请输入所属医院!"}]}],expression:"['hospitalId', { rules: [{ required: true, message: '请输入所属医院!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"所属科室"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["departmentId",{rules:[{required:!0,message:"请输入所属科室!"}]}],expression:"['departmentId', { rules: [{ required: true, message: '请输入所属科室!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入姓名!"}]}],expression:"['name', { rules: [{ required: true, message: '请输入姓名!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"性别"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请选择性别!"}]}],expression:"['gender', { rules: [{ required: true, message: '请选择性别!' }] }]"}]},[a("a-select-option",{attrs:{value:"M"}},[t._v("男")]),t._v(" "),a("a-select-option",{attrs:{value:"F"}},[t._v("女")])],1)],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"出生日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{rules:[{required:!0,message:"请选择出生日期!"}]}],expression:"['birthday', { rules: [{ required: true, message: '请选择出生日期!' }] }]"}],staticStyle:{width:"100%"}})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"患者唯一码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入患者唯一码!"}]}],expression:"['code', { rules: [{ required: true, message: '请输入患者唯一码!' }] }]"}]})],1)],1)],1)],1)],2)},staticRenderFns:[]},o=a("VU/8")(r,s,!1,function(t){a("E1A4")},"data-v-3af88f02",null);e.default=o.exports},"9UO4":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(a("PJh5"),a("Mqi+")),n={name:"PatientView",props:{patientShow:{type:Boolean,default:!1},patientData:{type:Object}},data:function(){return{hospitalDict:i.c,departmentDict:i.a}},computed:{show:{get:function(){return this.patientShow},set:function(){}}},watch:{patientShow:function(t){var e=this;t&&this.patientData&&this.patientData.id&&this.$get("/patient/"+this.patientData.id).then(function(t){t&&t.data&&e.$emit("update:patientData",t.data)})}},methods:{onClose:function(){this.$emit("close")}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"患者详情",width:850},on:{cancel:t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",attrs:{type:"danger"},on:{click:t.onClose}},[t._v("关闭")])],1),t._v(" "),null!==t.patientData?a("div",{staticStyle:{"font-size":"13px","font-family":"SimHei"}},[a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{staticStyle:{"margin-bottom":"15px"}},[a("span",{staticStyle:{"font-size":"15px","font-weight":"650",color:"#000c17"}},[t._v("患者信息")])]),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("所属医院：")]),t._v(t._s(t.hospitalDict[t.patientData.hospitalId]||t.patientData.hospitalId))]),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("所属科室：")]),t._v(t._s(t.departmentDict[t.patientData.departmentId]||t.patientData.departmentId))]),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("姓名：")]),t._v(t._s(t.patientData.name))])],1),t._v(" "),a("br"),t._v(" "),a("a-row",{staticStyle:{"padding-left":"24px","padding-right":"24px"}},[a("a-col",{attrs:{span:8}},[a("b",[t._v("性别：")]),t._v(" "),"M"==t.patientData.gender?a("a-tag",{attrs:{color:"blue"}},[t._v("男")]):t._e(),t._v(" "),"F"==t.patientData.gender?a("a-tag",{attrs:{color:"pink"}},[t._v("女")]):t._e()],1),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("出生日期：")]),t._v(t._s(t.patientData.birthday))]),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("患者唯一码：")]),t._v(t._s(t.patientData.code))]),t._v(" "),a("a-col",{attrs:{span:8}},[a("b",[t._v("状态：")]),t._v(" "),"online"===t.patientData.status?a("a-tag",{attrs:{color:"green"}},[t._v("在线")]):"offline"===t.patientData.status?a("a-tag",{attrs:{color:"red"}},[t._v("离线")]):"error"===t.patientData.status?a("a-tag",{attrs:{color:"orange"}},[t._v("故障")]):"unknown"===t.patientData.status?a("a-tag",[t._v("未知")]):a("span",[t._v(t._s(t.patientData.status||"-"))])],1)],1)],1):t._e()],2)},staticRenderFns:[]},s=a("VU/8")(n,r,!1,function(t){a("J+HN")},"data-v-8af8ccbc",null);e.default=s.exports},E1A4:function(t,e){},Gosl:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"新增患者",width:800},on:{cancel:t.onClose},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.onClose}},[t._v("取消")]),t._v(" "),a("a-button",{key:"submit",attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("提交")])],1),t._v(" "),a("a-form",{attrs:{form:t.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:20}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"所属医院"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["hospitalId",{rules:[{required:!0,message:"请输入所属医院!"}]}],expression:"['hospitalId', { rules: [{ required: true, message: '请输入所属医院!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"所属科室"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["departmentId",{rules:[{required:!0,message:"请输入所属科室!"}]}],expression:"['departmentId', { rules: [{ required: true, message: '请输入所属科室!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"姓名"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入姓名!"}]}],expression:"['name', { rules: [{ required: true, message: '请输入姓名!' }] }]"}]})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"性别"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["gender",{rules:[{required:!0,message:"请选择性别!"}]}],expression:"['gender', { rules: [{ required: true, message: '请选择性别!' }] }]"}]},[a("a-select-option",{attrs:{value:"M"}},[t._v("男")]),t._v(" "),a("a-select-option",{attrs:{value:"F"}},[t._v("女")])],1)],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"出生日期"}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["birthday",{rules:[{required:!0,message:"请选择出生日期!"}]}],expression:"['birthday', { rules: [{ required: true, message: '请选择出生日期!' }] }]"}],staticStyle:{width:"100%"}})],1)],1),t._v(" "),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"患者唯一码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入患者唯一码!"}]}],expression:"['code', { rules: [{ required: true, message: '请输入患者唯一码!' }] }]"}]})],1)],1)],1)],1)],2)},staticRenderFns:[]},n=a("VU/8")({name:"PatientAdd",props:{patientAddVisiable:{default:!1}},computed:{show:{get:function(){return this.patientAddVisiable},set:function(){}}},data:function(){return{form:this.$form.createForm(this),loading:!1}},methods:{reset:function(){this.loading=!1,this.form.resetFields()},onClose:function(){this.reset(),this.$emit("close")},handleSubmit:function(){var t=this;this.form.validateFields(function(e,a){e||(t.loading=!0,a.birthday&&a.birthday.format&&(a.birthday=a.birthday.format("YYYY-MM-DD")),t.$postJson("/patient",a).then(function(){t.reset(),t.$emit("success")}).catch(function(){t.loading=!1}))})}}},i,!1,function(t){a("+lxO")},"data-v-6ef4d802",null);e.default=n.exports},"J+HN":function(t,e){},LHZr:function(t,e){},UAtb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),r=a("Gosl"),s=a("1yPJ"),o=a("9UO4"),l=a("Mqi+"),d={name:"Patient",components:{patientAdd:r.default,patientEdit:s.default,patientView:o.default},data:function(){return{patientAdd:{visiable:!1},patientEdit:{visiable:!1},patientView:{visiable:!1,data:null},queryParams:{},dataSource:[],loading:!1,pagination:{pageSizeOptions:["10","20","30","40","100"],current:1,pageSize:10,showQuickJumper:!0,showSizeChanger:!0,showTotal:function(t,e){return"显示 "+e[0]+" ~ "+e[1]+" 条记录，共 "+t+" 条记录"},total:0}}},computed:{columns:function(){return[{title:"所属医院",dataIndex:"hospitalId",customRender:function(t){return l.c[t]||t}},{title:"所属科室",dataIndex:"departmentId",customRender:function(t){return l.a[t]||t}},{title:"姓名",dataIndex:"name"},{title:"性别",dataIndex:"gender",customRender:function(t){return"M"===t?"男":"F"===t?"女":""}},{title:"出生日期",dataIndex:"birthday"},{title:"患者唯一码",dataIndex:"code"},{title:"状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}]}},methods:{search:function(t,e){var a=this;this.loading=!0;var i=n()({pageNum:t||this.pagination.current,pageSize:e||this.pagination.pageSize},this.queryParams);this.$get("/patient/page",i).then(function(t){t&&t.data&&(a.dataSource=t.data.records||t.data.list||[],a.pagination.total=t.data.total||0,a.pagination.current=i.pageNum,a.pagination.pageSize=i.pageSize),a.loading=!1}).catch(function(){a.loading=!1})},reset:function(){this.queryParams={},this.search(1,this.pagination.pageSize)},add:function(){this.patientAdd.visiable=!0},edit:function(t){var e=this;this.patientEdit.visiable=!0,this.$nextTick(function(){e.$refs.patientEdit.setFormValues(t)})},remove:function(t){var e=this;this.$confirm({title:"确认删除该患者吗？",onOk:function(){e.$delete("/patient/"+t.id).then(function(){e.$message.success("删除成功"),e.search()})}})},handleTableChange:function(t){this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.search(t.current,t.pageSize)},handlePatientAddClose:function(){this.patientAdd.visiable=!1},handlePatientAddSuccess:function(){this.patientAdd.visiable=!1,this.search()},handlePatientEditClose:function(){this.patientEdit.visiable=!1},handlePatientEditSuccess:function(){this.patientEdit.visiable=!1,this.search()},handlePatientViewOpen:function(t){this.patientView.data=t,this.patientView.visiable=!0},handlePatientViewClose:function(){this.patientView.visiable=!1}},mounted:function(){this.search()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[a("div",{staticClass:"search"},[a("a-form",{attrs:{layout:"horizontal"}},[a("a-row",{attrs:{gutter:15}},[a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"姓名",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{model:{value:t.queryParams.name,callback:function(e){t.$set(t.queryParams,"name",e)},expression:"queryParams.name"}})],1)],1),t._v(" "),a("a-col",{attrs:{md:6,sm:24}},[a("a-form-item",{attrs:{label:"患者唯一码",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[a("a-input",{model:{value:t.queryParams.code,callback:function(e){t.$set(t.queryParams,"code",e)},expression:"queryParams.code"}})],1)],1),t._v(" "),a("span",{staticStyle:{float:"right","margin-top":"3px"}},[a("a-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),a("div",[a("div",{staticClass:"operator"},[a("a-button",{attrs:{type:"primary",ghost:""},on:{click:t.add}},[t._v("新增")])],1),t._v(" "),a("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.dataSource,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"status",fn:function(e){return["online"===e?a("a-tag",{attrs:{color:"green"}},[t._v("在线")]):"offline"===e?a("a-tag",{attrs:{color:"red"}},[t._v("离线")]):"error"===e?a("a-tag",{attrs:{color:"orange"}},[t._v("故障")]):"unknown"===e?a("a-tag",[t._v("未知")]):a("span",[t._v(t._s(e||"-"))])]}},{key:"operation",fn:function(e,i){return[a("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"eye",title:"详情"},on:{click:function(e){return t.handlePatientViewOpen(i)}}}),t._v(" "),a("a-icon",{staticStyle:{"margin-right":"10px"},attrs:{type:"edit",title:"编辑"},on:{click:function(e){return t.edit(i)}}}),t._v(" "),a("a-icon",{attrs:{type:"delete",title:"删除"},on:{click:function(e){return t.remove(i)}}})]}}])})],1),t._v(" "),t.patientAdd.visiable?a("patient-add",{attrs:{patientAddVisiable:t.patientAdd.visiable},on:{close:t.handlePatientAddClose,success:t.handlePatientAddSuccess}}):t._e(),t._v(" "),a("patient-edit",{ref:"patientEdit",attrs:{patientEditVisiable:t.patientEdit.visiable},on:{close:t.handlePatientEditClose,success:t.handlePatientEditSuccess}}),t._v(" "),a("patient-view",{attrs:{patientShow:t.patientView.visiable,patientData:t.patientView.data},on:{close:t.handlePatientViewClose}})],1)},staticRenderFns:[]},u=a("VU/8")(d,c,!1,function(t){a("LHZr")},"data-v-536c055c",null);e.default=u.exports}});