webpackJsonp([98],{dcHb:function(t,a){},hJA1:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Dd8w"),s=e.n(r),o=e("Mqi+"),n={name:"PrescriptionExecution",data:function(){return{dataSource:[],loading:!1,hospitalDict:o.c,dateRange:[],queryParams:{patientId:"",deviceId:"",prescriptionId:"",executorId:"",status:"",hospitalId:"",startDate:"",endDate:""},pagination:{current:1,pageSize:10,total:0,hideOnSinglePage:!0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(t,a){return"第 "+a[0]+"-"+a[1]+" 条/总共 "+t+" 条"}}}},computed:{columns:function(){return[{title:"跟踪ID",dataIndex:"id",key:"id",width:100},{title:"患者ID",dataIndex:"patientId",key:"patientId",width:100},{title:"设备ID",dataIndex:"deviceId",key:"deviceId",width:100},{title:"处方ID",dataIndex:"prescriptionId",key:"prescriptionId",width:100},{title:"执行人ID",dataIndex:"executorId",key:"executorId",width:100},{title:"状态",dataIndex:"status",key:"status",width:100,scopedSlots:{customRender:"status"}},{title:"进度描述",dataIndex:"progress",key:"progress",width:200},{title:"异常原因",dataIndex:"exception",key:"exception",width:200},{title:"创建人ID",dataIndex:"createdBy",key:"createdBy",width:100},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",width:150},{title:"最近操作人ID",dataIndex:"updatedBy",key:"updatedBy",width:120},{title:"最近操作时间",dataIndex:"updatedAt",key:"updatedAt",width:150},{title:"医院ID",dataIndex:"hospitalId",key:"hospitalId",width:100}]}},mounted:function(){this.pagination=s()({},this.pagination,{current:1,pageSize:10,total:0}),this.queryParams=s()({},this.queryParams),this.loadData()},methods:{onDateChange:function(t,a){this.queryParams.startDate=a[0],this.queryParams.endDate=a[1]},loadData:function(){var t=this;this.loading=!0,this.$get("/prescription-execution",s()({},this.queryParams,{current:this.pagination.current,size:this.pagination.pageSize})).then(function(a){var e=[];Array.isArray(a.data)?(e=a.data,t.pagination.total=a.data.length):a.data&&a.data.records?(e=a.data.records||[],t.pagination.total=a.data.total||0):(e=[],t.pagination.total=0),t.dataSource=e.sort(function(t,a){var e=new Date(t.createdAt||t.createTime||0);return new Date(a.createdAt||a.createTime||0)-e}),t.loading=!1}).catch(function(a){t.loading=!1})},search:function(){this.pagination.current=1,this.loadData()},reset:function(){this.queryParams={patientId:"",deviceId:"",prescriptionId:"",executorId:"",status:"",hospitalId:"",startDate:"",endDate:""},this.dateRange=[],this.pagination.current=1,this.loadData()},exportExcel:function(){this.$message.info("导出功能开发中...")},handleTableChange:function(t){this.pagination.current=t.current,this.pagination.pageSize=t.pageSize,this.loadData()}}},i={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("a-card",{staticClass:"card-area",attrs:{bordered:!1}},[e("div",{staticClass:"search"},[e("a-form",{attrs:{layout:"horizontal"}},[e("a-row",{attrs:{gutter:15}},[e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"患者ID",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入患者ID"},model:{value:t.queryParams.patientId,callback:function(a){t.$set(t.queryParams,"patientId",a)},expression:"queryParams.patientId"}})],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"设备ID",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入设备ID"},model:{value:t.queryParams.deviceId,callback:function(a){t.$set(t.queryParams,"deviceId",a)},expression:"queryParams.deviceId"}})],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"处方ID",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入处方ID"},model:{value:t.queryParams.prescriptionId,callback:function(a){t.$set(t.queryParams,"prescriptionId",a)},expression:"queryParams.prescriptionId"}})],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"执行人ID",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-input",{attrs:{placeholder:"请输入执行人ID"},model:{value:t.queryParams.executorId,callback:function(a){t.$set(t.queryParams,"executorId",a)},expression:"queryParams.executorId"}})],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"状态",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-select",{attrs:{placeholder:"请选择状态",allowClear:""},model:{value:t.queryParams.status,callback:function(a){t.$set(t.queryParams,"status",a)},expression:"queryParams.status"}},[e("a-select-option",{attrs:{value:"0"}},[t._v("待下发")]),t._v(" "),e("a-select-option",{attrs:{value:"1"}},[t._v("已下发")]),t._v(" "),e("a-select-option",{attrs:{value:"2"}},[t._v("执行中")]),t._v(" "),e("a-select-option",{attrs:{value:"3"}},[t._v("完成")]),t._v(" "),e("a-select-option",{attrs:{value:"4"}},[t._v("异常")])],1)],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"医院",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-select",{attrs:{placeholder:"请选择医院",allowClear:""},model:{value:t.queryParams.hospitalId,callback:function(a){t.$set(t.queryParams,"hospitalId",a)},expression:"queryParams.hospitalId"}},t._l(t.hospitalDict,function(a,r){return e("a-select-option",{key:r,attrs:{value:parseInt(r)}},[t._v(t._s(a))])}),1)],1)],1),t._v(" "),e("a-col",{attrs:{md:6,sm:24}},[e("a-form-item",{attrs:{label:"创建时间",labelCol:{span:5},wrapperCol:{span:18,offset:1}}},[e("a-range-picker",{attrs:{format:"YYYY-MM-DD",placeholder:["开始日期","结束日期"]},on:{change:t.onDateChange},model:{value:t.dateRange,callback:function(a){t.dateRange=a},expression:"dateRange"}})],1)],1),t._v(" "),e("span",{staticStyle:{float:"right","margin-top":"3px"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("查询")]),t._v(" "),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),e("div",[e("div",{staticClass:"operator"},[e("a-dropdown",[e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",{key:"export-data",on:{click:t.exportExcel}},[t._v("导出Excel")])],1),t._v(" "),e("a-button",[t._v("\n          更多操作 "),e("a-icon",{attrs:{type:"down"}})],1)],1)],1),t._v(" "),e("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.dataSource,pagination:t.pagination,loading:t.loading,scroll:{x:1500}},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"status",fn:function(a){return[0===a?e("a-tag",{attrs:{color:"orange"}},[t._v("待下发")]):1===a?e("a-tag",{attrs:{color:"blue"}},[t._v("已下发")]):2===a?e("a-tag",{attrs:{color:"green"}},[t._v("执行中")]):3===a?e("a-tag",{attrs:{color:"green"}},[t._v("完成")]):4===a?e("a-tag",{attrs:{color:"red"}},[t._v("异常")]):e("a-tag",{attrs:{color:"default"}},[t._v("未知")])]}}])})],1)])},staticRenderFns:[]},l=e("VU/8")(n,i,!1,function(t){e("dcHb")},"data-v-13f6eb88",null);a.default=l.exports}});